#include "stdafx.h"
#include <iostream>
#include <conio.h>

using namespace std;

bool GM;
const int w = 20, h = 20; //размеры поля
int field[h][w];
/*
0 - поле
1 - змея
2 - фрукт
3 - граница
*/
int xh, yh, xf, yf, xt, yt;
enum eD { STOP = 0, LEFT, RIGHT, UP, DOWN };
eD dir;

bool empty(int x,int y)
{
	if (field[y][x])
		return false;
	else
		return true;
}

void Setup() {
	GM = false;
	dir = STOP;
	xh = w / 2 - 1;
	yh = h / 2 - 1;
	xf = rand() % w;
	yf= rand() % h;
	for (int i = 0; i < h; i++)
		for (int j = 0; j < w; j++)
		{
			if ((i == 0) || (j == 0) || (i == w - 1) || (j == h - 1)) field[i][j] = 3;
			else if ((i == xh) || (j == yh)) field[i][j] = 1;
			else if ((i == xf) || (j == yf)) field[i][j] = 2;
			else field[i][j] = 0;
		}

}

void Draw() 
{
	system("cls");
	for (int i = 0; i < h; i++)
		for (int j = 0; j < w; j++)
		{
			switch (field[i][j])
			{
			case 1:
				cout << 0;
				break;
			case 2:
				cout << 'F';
				break;
			case 3:
				cout << '#';
				break;
			}
			cout << endl;
		}
}

void Input() {
	if (_kbhit()) {
		switch (_getch()) {
		case 'a':
			dir = LEFT;
			break;
		case 'w':
			dir = UP;
			break;
		case 'd':
			dir = RIGHT;
			break;
		case 's':
			dir = DOWN;
			break;
		}
	}
}

void Logic() 
{
	switch (dir) 
	{
	case LEFT:
		xh--;
		break;
	case RIGHT:
		xh++;
		break;
	case UP:
		yh--;
		break;
	case DOWN:
		yh++;
		break;
	}

	if (xh > w || xh<0 || yh>h || yh < 0) GM = true;

}

int main()
{
	while (true) {
		Setup();
		while (!GM) {
			Draw();
			Input();
			Logic();
		}
	}
	return 0;
	system("pause");
}
